<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/listener/TestListener.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/listener/TestListener.java" />
              <option name="originalContent" value="package listener;&#10;&#10;import org.testng.ITestContext;&#10;import org.testng.ITestListener;&#10;import org.testng.ITestResult;&#10;import reports.ExtentLogger;&#10;import reports.ExtentReport;&#10;import utilities.FilesUtil;&#10;&#10;public class TestListener implements ITestListener {&#10;&#10;&#10;    @Override&#10;    public void onStart(ITestContext result) {&#10;        // Clean the ExtentReport folder inside the project/run directory&#10;        FilesUtil.cleanFolder(&quot;./ExtentReport&quot;);&#10;        ExtentReport.initReports();&#10;    }&#10;&#10;    @Override&#10;    public void onFinish(ITestContext result) {&#10;        ExtentReport.flushReports();&#10;        ExtentLogger.resetStep();&#10;    }&#10;&#10;    @Override&#10;    public void onTestStart(ITestResult result) {&#10;        ExtentReport.createTest(result.getMethod().getMethodName().replaceAll(&quot;_&quot;, &quot; &quot;));&#10;    }&#10;&#10;    @Override&#10;    public void onTestSuccess(ITestResult result) {&#10;        //doTestPass(result, false);&#10;    }&#10;&#10;    @Override&#10;    public void onTestFailure(ITestResult result) {&#10;        doTestFail(result, true);&#10;    }&#10;&#10;    @Override&#10;    public void onTestSkipped(ITestResult result) {&#10;        doTestSkip(result);&#10;    }&#10;&#10;    @Override&#10;    public void onTestFailedButWithinSuccessPercentage(ITestResult result) {&#10;&#10;    }&#10;&#10;    public static void doTestFail(ITestResult result, boolean isScreenShotNeeded) {&#10;        String exceptionMessage = result.getThrowable().toString();&#10;        String message = &quot;&lt;details&gt;&lt;summary&gt;&lt;b&gt;&lt;font color=red&gt; Exception occured, click to see details: &quot;&#10;                + &quot; &lt;/font&gt;&lt;/b&gt;&quot; + &quot;&lt;/summary&gt;&quot; + exceptionMessage.replaceAll(&quot;,&quot;, &quot;&lt;br&gt;&quot;)&#10;                + &quot;&lt;/details&gt; \n&quot;;&#10;        String logText = &quot;&lt;b&gt;&quot; + result.getMethod().getMethodName() + &quot; is failed.&lt;/b&gt;&quot;;&#10;        ExtentLogger.fail(logText + &quot;&lt;br&gt;&quot; + message, isScreenShotNeeded);&#10;    }&#10;&#10;    public static void doTestPass(ITestResult result, boolean isScreenShotNeeded) {&#10;        String logText = &quot;&lt;b&gt;&quot; + result.getMethod().getMethodName() + &quot; is passed.&lt;/b&gt;&quot;;&#10;        ExtentLogger.pass(logText, isScreenShotNeeded);&#10;    }&#10;&#10;    public static void doTestSkip(ITestResult result) {&#10;        String logText = &quot;&lt;b&gt;&quot; + result.getMethod().getMethodName() + &quot; is skipped.&lt;/b&gt;&quot;;&#10;        ExtentLogger.skip(logText);&#10;    }&#10;&#10;}&#10;" />
              <option name="updatedContent" value="package listener;&#13;&#10;&#13;&#10;import org.testng.ITestContext;&#13;&#10;import org.testng.ITestListener;&#13;&#10;import org.testng.ITestResult;&#13;&#10;import reports.ExtentLogger;&#13;&#10;import reports.ExtentReport;&#13;&#10;import utilities.FilesUtil;&#13;&#10;&#13;&#10;import java.io.File;&#13;&#10;&#13;&#10;public class TestListener implements ITestListener {&#13;&#10;&#13;&#10;    @Override&#13;&#10;    public void onStart(ITestContext result) {&#13;&#10;        // Base path = user.dir giống với ExtentReport&#13;&#10;        String baseDir = System.getProperty(&quot;user.dir&quot;);&#13;&#10;        String reportDirPath = baseDir + File.separator + &quot;ExtentReport&quot;;&#13;&#10;&#13;&#10;        System.out.println(&quot;[TestListener] cleaning folder: &quot; + reportDirPath);&#13;&#10;&#13;&#10;        // Chỉ clean nếu thư mục tồn tại, tránh tool bên dưới ném lỗi&#13;&#10;        File reportDir = new File(reportDirPath);&#13;&#10;        if (reportDir.exists()) {&#13;&#10;            FilesUtil.cleanFolder(reportDirPath);&#13;&#10;        }&#13;&#10;&#13;&#10;        ExtentReport.initReports();&#13;&#10;    }&#13;&#10;&#13;&#10;    @Override&#13;&#10;    public void onFinish(ITestContext result) {&#13;&#10;        ExtentReport.flushReports();&#13;&#10;        ExtentLogger.resetStep();&#13;&#10;    }&#13;&#10;&#13;&#10;    @Override&#13;&#10;    public void onTestStart(ITestResult result) {&#13;&#10;        ExtentReport.createTest(result.getMethod().getMethodName().replaceAll(&quot;_&quot;, &quot; &quot;));&#13;&#10;    }&#13;&#10;&#13;&#10;    @Override&#13;&#10;    public void onTestSuccess(ITestResult result) {&#13;&#10;        //doTestPass(result, false);&#13;&#10;    }&#13;&#10;&#13;&#10;    @Override&#13;&#10;    public void onTestFailure(ITestResult result) {&#13;&#10;        doTestFail(result, true);&#13;&#10;    }&#13;&#10;&#13;&#10;    @Override&#13;&#10;    public void onTestSkipped(ITestResult result) {&#13;&#10;        doTestSkip(result);&#13;&#10;    }&#13;&#10;&#13;&#10;    @Override&#13;&#10;    public void onTestFailedButWithinSuccessPercentage(ITestResult result) {&#13;&#10;&#13;&#10;    }&#13;&#10;&#13;&#10;    public static void doTestFail(ITestResult result, boolean isScreenShotNeeded) {&#13;&#10;        String exceptionMessage = result.getThrowable().toString();&#13;&#10;        String message = &quot;&lt;details&gt;&lt;summary&gt;&lt;b&gt;&lt;font color=red&gt; Exception occured, click to see details: &quot;&#13;&#10;                + &quot; &lt;/font&gt;&lt;/b&gt;&quot; + &quot;&lt;/summary&gt;&quot; + exceptionMessage.replaceAll(&quot;,&quot;, &quot;&lt;br&gt;&quot;)&#13;&#10;                + &quot;&lt;/details&gt; \n&quot;;&#13;&#10;        String logText = &quot;&lt;b&gt;&quot; + result.getMethod().getMethodName() + &quot; is failed.&lt;/b&gt;&quot;;&#13;&#10;        ExtentLogger.fail(logText + &quot;&lt;br&gt;&quot; + message, isScreenShotNeeded);&#13;&#10;    }&#13;&#10;&#13;&#10;    public static void doTestPass(ITestResult result, boolean isScreenShotNeeded) {&#13;&#10;        String logText = &quot;&lt;b&gt;&quot; + result.getMethod().getMethodName() + &quot; is passed.&lt;/b&gt;&quot;;&#13;&#10;        ExtentLogger.pass(logText, isScreenShotNeeded);&#13;&#10;    }&#13;&#10;&#13;&#10;    public static void doTestSkip(ITestResult result) {&#13;&#10;        String logText = &quot;&lt;b&gt;&quot; + result.getMethod().getMethodName() + &quot; is skipped.&lt;/b&gt;&quot;;&#13;&#10;        ExtentLogger.skip(logText);&#13;&#10;    }&#13;&#10;&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>